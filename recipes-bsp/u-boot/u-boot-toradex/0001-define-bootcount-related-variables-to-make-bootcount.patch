From 822e6241ac14809a355037e0fdc3fc649826f331 Mon Sep 17 00:00:00 2001
From: Naeem Khan <naeem.khan@toradex.com>
Date: Tue, 10 Mar 2020 08:08:20 -0400
Subject: [PATCH] define bootcount related variables to make bootcount work

    Related to: TOR-73, 50811

Signed-off-by: Naeem Khan <naeem.khan@toradex.com>
---
 include/configs/apalis-imx8.h     | 5 ++++-
 include/configs/apalis-imx8x.h    | 5 ++++-
 include/configs/colibri-imx8qxp.h | 5 ++++-
 include/configs/verdin-imx8mm.h   | 5 ++++-
 4 files changed, 16 insertions(+), 4 deletions(-)

diff --git a/include/configs/apalis-imx8.h b/include/configs/apalis-imx8.h
index 89213e88b0..6658373553 100644
--- a/include/configs/apalis-imx8.h
+++ b/include/configs/apalis-imx8.h
@@ -133,7 +133,10 @@
 	"mmcargs=setenv bootargs console=${console},${baudrate} root=${mmcroot} " \
 	"video=imxdpufb5:off video=imxdpufb6:off video=imxdpufb7:off\0" \
 	"setup=run loadhdp; hdp load ${hdp_addr}; run mmcargs\0" \
-	"defargs=pci=nomsi"
+	"defargs=pci=nomsi" \
+	"bootlimit=3\0" \
+	"upgrade_available=0\0" \
+	"altbootcmd=run bootcmd\0"
 
 /* Link Definitions */
 #define CONFIG_LOADADDR			0x80280000
diff --git a/include/configs/apalis-imx8x.h b/include/configs/apalis-imx8x.h
index 117fbaaa68..7b104cf2b4 100644
--- a/include/configs/apalis-imx8x.h
+++ b/include/configs/apalis-imx8x.h
@@ -110,7 +110,10 @@
 	"mmcautodetect=yes\0" \
 	"mmcargs=setenv bootargs console=${console},${baudrate} root=${mmcroot} " \
 	"video=imxdpufb5:off video=imxdpufb6:off video=imxdpufb7:off\0" \
-	"setup=run mmcargs\0"
+	"setup=run mmcargs\0" \
+	"bootlimit=3\0" \
+	"upgrade_available=0\0" \
+	"altbootcmd=run bootcmd\0"
 
 /* Link Definitions */
 #define CONFIG_LOADADDR			0x80280000
diff --git a/include/configs/colibri-imx8qxp.h b/include/configs/colibri-imx8qxp.h
index 0d40042b8e..b9e29825b5 100644
--- a/include/configs/colibri-imx8qxp.h
+++ b/include/configs/colibri-imx8qxp.h
@@ -108,7 +108,10 @@
 	"mmcautodetect=yes\0" \
 	"mmcargs=setenv bootargs console=${console},${baudrate} root=${mmcroot} " \
 	"video=imxdpufb5:off video=imxdpufb6:off video=imxdpufb7:off\0" \
-	"setup=run mmcargs\0"
+	"setup=run mmcargs\0" \
+	"bootlimit=3\0" \
+	"upgrade_available=0\0" \
+	"altbootcmd=run bootcmd\0"
 
 /* Link Definitions */
 #define CONFIG_LOADADDR			0x80280000
diff --git a/include/configs/verdin-imx8mm.h b/include/configs/verdin-imx8mm.h
index fdc1456243..7197eb80a5 100644
--- a/include/configs/verdin-imx8mm.h
+++ b/include/configs/verdin-imx8mm.h
@@ -128,7 +128,10 @@
 	"initrd_addr=0x43800000\0" \
 	"initrd_high=0xffffffffffffffff\0" \
 	"kernel_image=Image\0" \
-	"setup=setenv setupargs console=${console},${baudrate} console=tty1 consoleblank=0 earlycon\0"
+	"setup=setenv setupargs console=${console},${baudrate} console=tty1 consoleblank=0 earlycon\0" \
+	"bootlimit=3\0" \
+	"upgrade_available=0\0" \
+	"altbootcmd=run bootcmd\0"
 
 #define CONFIG_SYS_INIT_RAM_ADDR	0x40000000
 #define CONFIG_SYS_INIT_RAM_SIZE	0x80000
-- 
2.17.1


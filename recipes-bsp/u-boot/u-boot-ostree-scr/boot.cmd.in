if test ${distro_bootpart} != 1
then
    echo "Boot partition needs to be the first partition"
    exit
fi

setenv bootcmd_dtb 'fatload ${devtype} ${devnum}:1 ${fdt_addr_r} /${fdtfile}'
setenv bootcmd_otenv 'ext4load ${devtype} ${devnum}:2 ${loadaddr} /boot/loader/uEnv.txt; env import -t ${loadaddr} ${filesize}'
setenv bootcmd_args 'env set bootargs root=LABEL=otaroot rootfstype=ext4 ${bootargs}'
setenv bootcmd_load_k 'ext4load ${devtype} ${devnum}:2 ${kernel_addr_r} "/boot"${kernel_image}'
setenv bootcmd_load_r 'ext4load ${devtype} ${devnum}:2 ${ramdisk_addr_r} "/boot"${ramdisk_image}; setenv ramdisk_size ${filesize}'
setenv bootcmd_run '@@KERNEL_BOOTCMD@@ ${kernel_addr_r} ${ramdisk_addr_r}:${ramdisk_size} ${fdt_addr_r}'
setenv bootcmd 'run bootcmd_dtb && run bootcmd_otenv && run bootcmd_args && run bootcmd_load_k && run bootcmd_load_r && run bootcmd_run'
run bootcmd

